<!DOCTYPE html>
<html>
<head>
  <title>Mentorat</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <%- include('partials/head.ejs') %>
    <%- include('partials/header.ejs') %>

  <main class="flex flex-col items-center p-4 pt-20">
    <div class="relative flex rounded-full bg-gray-200 p-1 w-fit mt-10">
   <!-- Slider de fond -->
    <div id="slider" class="absolute left-0 top-0 h-full w-1/2 bg-[#5C83BA] rounded-full transition-all duration-300 ease-in-out z-0"></div>

      <button id="tab-eleve" class="relative z-10 px-4 py-1 text-white rounded-l-full focus:outline-none w-24">√âl√®ve</button>
      <button id="tab-enseignant" class="relative z-10 px-4 py-1 text-black rounded-r-full focus:outline-none w-24">Enseignant</button>
    </div>

      <!-- Contenus -->
    <div id="contenu-eleve" class="w-full text-center mt-10">
      <!-- Filtres par module (checkbox) -->
      <div id="filtreModules" class="flex flex-wrap justify-center gap-4 my-6">
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" class="filter-checkbox hidden peer">
          <span class="peer-checked:bg-blue-400 peer-checked:text-white bg-blue-200 text-black px-4 py-2 rounded-full font-semibold transition">
            Maths
          </span>
        </label>

        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" class="filter-checkbox hidden peer">
          <span class="peer-checked:bg-blue-400 peer-checked:text-white bg-blue-200 text-black px-4 py-2 rounded-full font-semibold transition">
            Physique
          </span>
        </label>

        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" class="filter-checkbox hidden peer">
          <span class="peer-checked:bg-blue-400 peer-checked:text-white bg-blue-200 text-black px-4 py-2 rounded-full font-semibold transition">
            Informatique
          </span>
        </label>

        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" class="filter-checkbox hidden peer">
          <span class="peer-checked:bg-blue-400 peer-checked:text-white bg-blue-200 text-black px-4 py-2 rounded-full font-semibold transition">
            Communication
          </span>
        </label>
      </div>
      
      <div id="mentorats-container" class="grid grid-cols-1 md:grid-cols-3 gap-4 p-4"></div>
    </div>

     <!-- Section cr√©neaux (initialement cach√©e) -->
      <div id="creneauxPage" class="hidden flex flex-col items-center p-4 gap-4">


      <h2 class="text-lg font-semibold">Les disponibilit√©s de L√©o :</h2>

      <div id="creneauxContainer" class="flex flex-col gap-4 w-full max-w-xs">
        <!-- Les cr√©neaux seront ajout√©s ici -->
      </div>

        <button id="btnRetourCreneaux" class="self-start bg-gray-300 text-black font-semibold px-4 py-1 rounded-full hover:bg-gray-400 transition">
          ‚Üê Retour
        </button>
    </div>

    <!-- Section confirmation (initialement cach√©e) -->
    <div id="confirmationPage" class="hidden flex flex-col items-center p-4 gap-4">
      <div class="bg-blue-200 rounded-xl p-4 w-full max-w-xs text-center">
        <div class="text-2xl mb-2">üïí</div>
        <p id="confirmationText" class="text-lg font-semibold mb-4"></p>
        <div class="flex justify-center gap-4">
          <button id="btnOui" class="bg-green-400 text-white px-4 py-1 rounded-full hover:bg-green-500">Oui</button>
          <button id="btnNon" class="bg-red-400 text-white px-4 py-1 rounded-full hover:bg-red-500">Non</button>
        </div>
      </div>
    </div>

    <div id="contenu-enseignant" class="w-full text-center hidden mt-10">
      <div id="homePage">
        <button id="btnAfficherCours" class="bg-blue-300 rounded-full px-6 py-2 font-semibold hover:bg-blue-400 transition">Voir mes cours existants</button>
        <button id="btnCreerCours" class="bg-blue-300 rounded-full px-6 py-2 font-semibold hover:bg-blue-400 transition">Cr√©er un nouveau cours</button>
      </div>
    </div>

    <div id="formulairePage" class="hidden w-full max-w-md bg-white p-6 rounded-xl shadow-lg mt-10">
      
      <form id="formCours" class="space-y-4">
        <div>
          <label class="block font-semibold mb-1">Mati√®re :</label>
          <input type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300" placeholder="Ex: Transformation Int√©grale">
        </div>

        <div>
          <label class="block font-semibold mb-1">Dur√©e :</label>
          <input type="time" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300">
        </div>

        <div>
          <label class="block font-semibold mb-1">Module :</label>
          <select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300">
            <option>Maths</option>
            <option>Physique</option>
            <option>Informatique</option>
            <option>Communication</option>
          </select>
        </div>

        <div>
          <label class="block font-semibold mb-1">Message (optionnel)</label>
          <textarea class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300" placeholder="Ton message..."></textarea>
        </div>

        <button type="submit" class="w-full bg-blue-400 text-white font-semibold py-2 rounded-lg hover:bg-blue-600 transition">
          Enregistrer
        </button>
      </form>
    </div>

  <div id="coursPage" class="hidden flex flex-col items-center p-4 gap-4">

    <p class="font-bold text-lg mt-4">Mes cours disponibles :</p>

    <div id="coursContainer" class="grid grid-cols-1 md:grid-cols-3 gap-4 w-full max-w-4xl">
      <!-- Les cartes de cours seront inject√©es ici -->
    </div>
  </div>


</main>




  <%- include("partials/footer.ejs") %>
  <script>
    const tabEleve = document.getElementById('tab-eleve');
    const tabEnseignant = document.getElementById('tab-enseignant');
    const slider = document.getElementById('slider');
    const contenuEleve = document.getElementById('contenu-eleve');
    const contenuEnseignant = document.getElementById('contenu-enseignant');

    tabEleve.addEventListener('click', () => {
      slider.style.left = '0%';
      tabEleve.classList.replace('text-black', 'text-white');
      tabEnseignant.classList.replace('text-white', 'text-black');
      contenuEleve.classList.remove('hidden');
      contenuEnseignant.classList.add('hidden');
      document.getElementById('creneauxPage').classList.add('hidden');
      document.getElementById('confirmationPage').classList.add('hidden');
      coursPage.classList.add('hidden');
      formulairePage.classList.add('hidden');
    });

    tabEnseignant.addEventListener('click', () => {
      slider.style.left = '50%';
      tabEnseignant.classList.replace('text-black', 'text-white');
      tabEleve.classList.replace('text-white', 'text-black');
      contenuEleve.classList.add('hidden');
      contenuEnseignant.classList.remove('hidden');
      document.getElementById('creneauxPage').classList.add('hidden');
      document.getElementById('confirmationPage').classList.add('hidden');
      coursPage.classList.add('hidden');
      formulairePage.classList.add('hidden');
    });

    function addMentorat(matiere, titre, intervenant, duree) {
      const container = document.getElementById('mentorats-container');
      const card = document.createElement('div');
      card.className = "bg-blue-200 rounded-2xl p-4 flex flex-col items-center text-center shadow-md";

      card.innerHTML = `
        <div class="text-3xl mb-2"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5" />
            </svg></div>
        <h3 class="text-lg font-semibold mb-3">${titre}</h3>
        <ul class="text-sm mb-5">
          <li>Pr√©sent√© par : ${intervenant}</li>
          <li>Dur√©e : ${duree}</li>
        </ul>
        <button class="bg-white text-sm font-medium border border-gray-400 px-3 py-1 rounded-full hover:bg-gray-100 transition">
          R√©server un cr√©neau
        </button>
      `;

      const boutonReserver = card.querySelector('button');

      boutonReserver.addEventListener('click', () => {
        mentoratActif = card; // On garde une r√©f√©rence √† cette carte mentorat
        document.getElementById('contenu-eleve').classList.add('hidden');
        document.getElementById('creneauxPage').classList.remove('hidden');

        // R√©initialiser les cr√©neaux (exemple basique)
        document.getElementById('creneauxContainer').innerHTML = '';
        addCreneau('10h', '12h');
        addCreneau('15h', '17h');
        addCreneau('16h', '18h');
      });

      container.appendChild(card);
    }


    
    // Exemple d'ajout
    document.addEventListener('DOMContentLoaded', () => {
        addMentorat('Maths', 'Transformation int√©gral', 'L√©o Lammar', '2h');
        addMentorat('Physique', 'Analyse des signaux', 'L√©o Lammar', '1h30');
        addMentorat('Informatique', 'Algorithmique avanc√©e', 'L√©o Lammar', '2h');
        addMentorat('Maths', 'Probabilit√©s', 'L√©o Lammar', '1h45');
    });

        // R√©f√©rences des pages
    const homePage = document.getElementById('homePage');
    const formulairePage = document.getElementById('formulairePage');
    const coursPage = document.getElementById('coursPage');

    // Boutons
    const btnAfficherCours = document.getElementById('btnAfficherCours');
    const btnCreerCours = document.getElementById('btnCreerCours');

    btnAfficherCours.addEventListener('click', () => {
      coursPage.classList.remove('hidden');
      formulairePage.classList.add('hidden'); // Masquer le formulaire
    });

    btnCreerCours.addEventListener('click', () => {
      formulairePage.classList.remove('hidden');
      coursPage.classList.add('hidden'); // Masquer les cours
    });


    // Exemple de donn√©es de cours pour affichage
    const coursContainer = document.getElementById('coursContainer');

    function addMentoratEnseignant(titre, duree) {
      const card = document.createElement('div');
      card.className = "bg-blue-200 rounded-2xl p-4 text-center shadow-md";
      card.innerHTML = `
        <div class="text-2xl mb-2">üë§</div>
        <h3 class="text-lg font-semibold mb-1">${titre}</h3>
        <p class="text-sm mb-2">Dur√©e : ${duree}</p>
        <button class="bg-white text-red-500 font-semibold border border-red-500 px-3 py-1 rounded-md hover:bg-red-100 transition">
          Supprimer
        </button>
      `;
      coursContainer.appendChild(card);
    }

    // Exemple de cours affich√©s
    addMentoratEnseignant('Transformation int√©gral', '2h');
    addMentoratEnseignant('Physique du solide', '4h');

    function addCreneau(heureDebut, heureFin) {
      const container = document.getElementById('creneauxContainer');
      const btn = document.createElement('button');
      btn.className = "bg-blue-300 text-black font-semibold rounded-full w-full py-2 hover:bg-blue-400 transition";
      btn.textContent = `${heureDebut} - ${heureFin}`;
      btn.addEventListener('click', () => {
        afficherConfirmation(`${heureDebut} - ${heureFin}`);
      });
      container.appendChild(btn);
    }

    let creneauSelectionne = null;
    let mentoratActif = null;

    function afficherConfirmation(creneau) {
      creneauSelectionne = creneau;
      document.getElementById('confirmationText').textContent = `Voulez-vous r√©server le cr√©neau : ${creneau} ?`;
      document.getElementById('creneauxPage').classList.add('hidden');
      document.getElementById('confirmationPage').classList.remove('hidden');
    }

    const btnOui = document.getElementById('btnOui');
    const btnNon = document.getElementById('btnNon');    


    btnOui.addEventListener('click', () => {
      if (mentoratActif) {
        mentoratActif.remove();
        mentoratActif = null; // On r√©initialise la variable
      }

      // Revenir √† la liste des mentorats
      document.getElementById('confirmationPage').classList.add('hidden');
      document.getElementById('contenu-eleve').classList.remove('hidden');
    });


    btnNon.addEventListener('click', () => {
      // Revenir √† la liste des cr√©neaux
      document.getElementById('confirmationPage').classList.add('hidden');
      document.getElementById('creneauxPage').classList.remove('hidden');
    });

    const btnRetourCreneaux = document.getElementById('btnRetourCreneaux');

    btnRetourCreneaux.addEventListener('click', () => {
      document.getElementById('creneauxPage').classList.add('hidden');
      document.getElementById('contenu-eleve').classList.remove('hidden');
    });


  </script>

</body>
</html>
